<div class="row m-0 pale-yellow">
  <div class="banner font-title">
      <p *ngIf="currentUser.type === 'patient'">Odontólogos</p>
      <p *ngIf="currentUser.type === 'dentist'">Pacientes</p>
      <p *ngIf="currentUser.type === 'admin'">Usuarios</p>
  </div>

  <div class="col-12 py-5 table-wrapper">

    <div class="w-100 my-4 px-4">
      <input class="form-control w-100 form-shadow" type="text" [(ngModel)]="searchName" autocomplete="off" placeholder="Busca por nombre">
    </div>

    <div
      class="w-100"
      id="accordion"
      *ngIf="currentUser.type === 'patient'; else listView"
    >
      <div class="card" *ngFor="let user of userList | filter: 'name' : searchName; let i = index">
        <div class="card-header card-color" id="{{ 'heading' + i }}">
          <h5 class="mb-0">
            <button
              class="btn btn-user"
              data-toggle="collapse"
              [attr.data-target]="'#user' + i"
              [attr.aria-expanded]="false"
              [attr.aria-controls]="'user' + i"
            >
              {{ user.name }}
            </button>
          </h5>
        </div>

        <div
          id="{{ 'user' + i }}"
          class="collapse"
          [attr.aria-labelledby]="'user' + i"
          data-parent="#accordion"
        >
          <div class="row acc-content">
            <div class="col-sm-4 avatar">
              <img src="../../../../assets/extra/avatar.png" alt="avatar">
            </div>
            <div class="col-sm-7 card-body ">
              <p>Nombre: {{ user.name }}</p>
              <p>Cédula: {{ user.identification }}</p>
              <p>Correo: {{ user.user }}</p>
              <p>{{ user.type | titlecase }}</p>
              <p>Horario: {{ user.shift[0] }} - {{ user.shift[1] }}</p>
              <p>Lunes a Viernes</p>
              <div class="text-center">
                <button class="btn btn-warning" type="button" (click)="onReserveAppointment(user)"><i class="fas fa-calendar-check mr-2"></i>Solicitar cita</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <ng-template #listView>
      <table class="table table-responsive-md list">
        <thead>
          <tr class="bg-info">
            <th>Nombre</th>
            <th>Cédula</th>
            <th>Correo</th>
            <th>Tipo</th>
            <th class="text-center">Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of userList | filter: 'name' : searchName">
            <th scope="row">{{ user.name }}</th>
            <td>{{ user.identification }}</td>
            <td>{{ user.user }}</td>
            <td class="text-capitalize">{{ user.type }}</td>
            <td class="text-center">
              <a *ngIf="currentUser.type === 'dentist'" class="mx-2" (click)="seeMedicalHistory(user)"
                ><i class="fas fa-book"></i
              ></a>
              <a *ngIf="currentUser.type === 'dentist'" class="mx-2" (click)="sendMessage(user)"
                ><i class="fas fa-envelope"></i
              ></a>
              <a *ngIf="currentUser.type === 'patient'" class="mx-2" (click)="editUser(user)"
                ><i class="fas fa-user-edit"></i
              ></a>
            </td>
          </tr>
        </tbody>
      </table>
    </ng-template>
  </div>
</div>
